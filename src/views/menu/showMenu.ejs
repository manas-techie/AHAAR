<% layout('layout/boilerplate') %>
    <style>
        .menu-items {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            margin-top: 20px;
        }
        .item-card {
            width: 200px;
            margin: 10px;
            padding: 10px;
            border-radius: 10px;
            box-shadow: 2px 2px 10px rgba(0, 0, 0, 0.1);
            text-align: center;
        }
        .item-card img {
            width: 100%;
            border-radius: 10px;
        }
        .price {
            font-weight: bold;
            color: green;
        }
    </style>
    <script>
        function showCategory(index) {
            let categories = document.querySelectorAll(".category-content");
            categories.forEach((cat, i) => {
                cat.style.display = i === index ? "flex" : "none";
            });

            let buttons = document.querySelectorAll(".navbar button");
            buttons.forEach((btn, i) => {
                btn.classList.toggle("active", i === index);
            });
        }

        document.addEventListener("DOMContentLoaded", () => {
            showCategory(0); // Show first category by default
        });
    </script>
</head>
<body>
    <!-- Category Navigation -->
    <div class="navbar">
        <% menu.categories.forEach((category, index) => { %>
            <button onclick="showCategory(<%= index %>)"><%= category.name %></button>
        <% }) %>
    </div>

    <!-- Items Section -->
    <div class="menu-items">
        <% menu.categories.forEach((category, index) => { %>
            <div class="category-content" style="display: none;">
                <% category.items.forEach(item => { %>
                    <div class="item-card">
                        <img src="<%= item.imageUrl || 'https://via.placeholder.com/200' %>" alt="<%= item.name %>">
                        <h3><%= item.name %></h3>
                        <p><%= item.description %></p>
                        <p class="price">Â£<%= item.price %></p>
                    </div>
                <% }) %>
            </div>
        <% }) %>
    </div>

    <% if(currUser && currUser._id == currUserId) { %>
        <form action="/menu/<%=currUserId %>/qrcode" method="GET">
            <button type="submit">Generate your QRcode</button>
        </form>
        <form action="/menu/<%=currUserId %>/edit" method="GET">
            <button type="submit">Edit</button>
        </form>
    <% } %>

</body>
</html>
